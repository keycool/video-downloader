---
name: video-downloader
description: ä½¿ç”¨ yt-dlp ä¸‹è½½è§†é¢‘ï¼Œæ”¯æŒç”»è´¨é€‰æ‹©ã€å­—å¹•ä¸‹è½½ã€ä»…éŸ³é¢‘æ¨¡å¼ï¼Œè‡ªåŠ¨åˆ¤æ–­è¯­è¨€å¹¶æ·»åŠ ä¸­æ–‡å­—å¹•
---

# è§†é¢‘ä¸‹è½½å™¨ (Video Downloader)

ä½¿ç”¨ yt-dlp å·¥å…·ä¸‹è½½ç½‘ç»œè§†é¢‘ï¼Œæ”¯æŒ YouTubeã€Bilibiliã€Twitter ç­‰ä¸»æµå¹³å°ã€‚**è‡ªåŠ¨åˆ¤æ–­è§†é¢‘è¯­è¨€ï¼šéä¸­æ–‡ï¼ˆæ™®é€šè¯/ç²¤è¯­ï¼‰è§†é¢‘å°†è‡ªåŠ¨æ·»åŠ ä¸­æ–‡å­—å¹•ã€‚**

## è§¦å‘æ–¹å¼

å½“ç”¨æˆ·è¯·æ±‚ä¸‹è½½è§†é¢‘æ—¶è§¦å‘ï¼Œè¯†åˆ«ä»¥ä¸‹å…³é”®è¯ï¼š
- "ä¸‹è½½è§†é¢‘"ã€"ä¸‹è½½è¿™ä¸ªè§†é¢‘"
- "download video"
- ç›´æ¥ç²˜è´´è§†é¢‘é“¾æ¥

## æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ | è¯´æ˜ |
|------|------|
| ğŸ¬ è§†é¢‘ä¸‹è½½ | æ”¯æŒ 1000+ å¹³å°ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä½³ç”»è´¨ |
| ğŸŒ è‡ªåŠ¨ä¸­æ–‡å­—å¹• | éä¸­æ–‡è§†é¢‘è‡ªåŠ¨è¯†åˆ«è¯­éŸ³å¹¶æ·»åŠ ä¸­æ–‡å­—å¹• |
| ğŸ“ æ•´ç†å½’æ¡£ | è‡ªåŠ¨åˆ›å»ºç»“æ„åŒ–æ–‡ä»¶å¤¹ï¼ŒæŒ‰æ—¥æœŸå½’æ¡£ |
| ğŸµ éŸ³é¢‘æå– | æ”¯æŒä»…ä¸‹è½½éŸ³é¢‘ï¼ˆMP3 æ ¼å¼ï¼‰ |
| ğŸ§¹ è‡ªåŠ¨æ¸…ç† | ä¸´æ—¶æ–‡ä»¶è¶…è¿‡ 3 ä¸ªæ—¶è‡ªåŠ¨æ¸…ç† |

## å‚æ•°è¯´æ˜

| å‚æ•° | å¿…å¡« | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `url` | âœ… | - | è§†é¢‘é“¾æ¥ |
| `quality` | âŒ | `best` | ç”»è´¨é€‰é¡¹ï¼š`best`(æœ€ä½³)ã€`1080`ã€`720`ã€`480` |
| `subtitle` | âŒ | `auto` | å­—å¹•å¤„ç†ï¼š`auto`(è‡ªåŠ¨åˆ¤æ–­)ã€`true`ã€`false` |
| `audio_only` | âŒ | `false` | ä»…ä¸‹è½½éŸ³é¢‘ï¼š`true` / `false` |
| `output_dir` | âŒ | `download/` | è¾“å‡ºç›®å½•è·¯å¾„ï¼ˆè‡ªåŠ¨åˆ›å»ºå­æ–‡ä»¶å¤¹ï¼‰ |
| `subtitle_type` | âŒ | `1` | å­—å¹•ç±»å‹ï¼š0=ä¸åµŒå…¥ï¼Œ1=ç¡¬å­—å¹•ï¼Œ3=ç¡¬åŒè¯­å­—å¹• |
| `source_lang` | âŒ | `en` | æºè¯­è¨€ï¼š`en`(è‹±è¯­)ã€`ja`(æ—¥è¯­)ã€`ko`(éŸ©è¯­) |

## è‡ªåŠ¨ä¸­æ–‡å­—å¹•è§„åˆ™

> **é‡è¦**ï¼šAgent åº”è‡ªåŠ¨åˆ¤æ–­è§†é¢‘è¯­è¨€ï¼Œæ— éœ€è¯¢é—®ç”¨æˆ·ã€‚

**åˆ¤æ–­é€»è¾‘**ï¼š
1. è·å–è§†é¢‘æ ‡é¢˜åï¼Œåˆ†ææ ‡é¢˜è¯­è¨€
2. å¦‚æœæ ‡é¢˜ä¸º**è‹±æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡æˆ–å…¶ä»–éä¸­æ–‡è¯­è¨€** â†’ è‡ªåŠ¨æ‰§è¡Œå­—å¹•ç¿»è¯‘
3. å¦‚æœæ ‡é¢˜ä¸º**ä¸­æ–‡ï¼ˆæ™®é€šè¯æˆ–ç²¤è¯­ï¼‰** â†’ è·³è¿‡å­—å¹•ç¿»è¯‘ï¼Œç›´æ¥å®Œæˆä¸‹è½½

**è¯­è¨€ä»£ç å¯¹ç…§**ï¼š
| è§†é¢‘è¯­è¨€ | source_language_code |
|---------|---------------------|
| è‹±è¯­ | `en` |
| æ—¥è¯­ | `ja` |
| éŸ©è¯­ | `ko` |
| æ³•è¯­ | `fr` |
| å¾·è¯­ | `de` |

## æ–‡ä»¶å¤¹å‘½åè§„åˆ™

ä¸‹è½½çš„æ–‡ä»¶ä¼šè‡ªåŠ¨æ•´ç†åˆ°ç»“æ„åŒ–çš„æ–‡ä»¶å¤¹ä¸­ï¼š

```
download/
â””â”€â”€ {åç§°ç¼©å†™}-{ä¸‹è½½æ—¥æœŸ}/
    â”œâ”€â”€ åŸå§‹è§†é¢‘.mp4
    â”œâ”€â”€ è§†é¢‘ [ä¸­æ–‡å­—å¹•].mp4ï¼ˆå¦‚æœ‰ï¼‰
    â”œâ”€â”€ zh-cn.srtï¼ˆä¸­æ–‡å­—å¹•ï¼‰
    â””â”€â”€ en.srtï¼ˆè‹±æ–‡å­—å¹•ï¼‰
```

**å‘½åè§„åˆ™**ï¼š
- **åç§°ç¼©å†™**ï¼šä»è§†é¢‘æ ‡é¢˜æå– 1-3 ä¸ªå…³é”®è¯ï¼Œé©¼å³°å‘½åï¼Œå¦‚ `MultipleInterests`
- **ä¸‹è½½æ—¥æœŸ**ï¼šæ ¼å¼ä¸º `YYYYMMDD`ï¼Œå¦‚ `20260128`
- **ç¤ºä¾‹**ï¼š`download/MultipleInterests-20260128/`

## ä½¿ç”¨ç¤ºä¾‹

### 1. åŸºç¡€ä¸‹è½½ï¼ˆè‡ªåŠ¨æ·»åŠ ä¸­æ–‡å­—å¹•ï¼‰
```
ä¸‹è½½è¿™ä¸ªè§†é¢‘ï¼šhttps://www.youtube.com/watch?v=xxxxx
```
> Agent è‡ªåŠ¨åˆ¤æ–­ï¼šè‹¥ä¸ºè‹±æ–‡è§†é¢‘ï¼Œè‡ªåŠ¨ç¿»è¯‘ä¸­æ–‡å­—å¹•

### 2. æŒ‡å®šç”»è´¨
```
ä¸‹è½½è¿™ä¸ªè§†é¢‘ï¼Œ720pï¼šhttps://www.youtube.com/watch?v=xxxxx
```

### 3. ä»…ä¸‹è½½éŸ³é¢‘
```
åªä¸‹è½½éŸ³é¢‘ï¼šhttps://www.youtube.com/watch?v=xxxxx
```

### 4. å¼ºåˆ¶åŒè¯­å­—å¹•ï¼ˆå­¦ä¹ ç”¨ï¼‰
```
ä¸‹è½½è§†é¢‘ï¼Œç”Ÿæˆä¸­è‹±åŒè¯­å­—å¹•ï¼šhttps://www.youtube.com/watch?v=xxxxx
```

---

## æ‰§è¡Œæµç¨‹

### Step 1: è·å–è§†é¢‘ä¿¡æ¯

```powershell
# è·å–è§†é¢‘æ ‡é¢˜
yt-dlp --get-title "<URL>"
```

**è¾“å‡ºç¤ºä¾‹**ï¼š`If you have multiple interests, do not waste the next 2-3 years`

### Step 2: åˆ¤æ–­è¯­è¨€å¹¶è®¾ç½®å‚æ•°

æ ¹æ®æ ‡é¢˜è¯­è¨€è‡ªåŠ¨åˆ¤æ–­ï¼š

| æ ‡é¢˜è¯­è¨€ | å¤„ç†æ–¹å¼ |
|---------|---------|
| è‹±æ–‡/æ—¥æ–‡/éŸ©æ–‡ç­‰ | è®¾ç½® `need_subtitle=true`ï¼Œç¡®å®š `source_lang` |
| ä¸­æ–‡ï¼ˆç®€/ç¹ï¼‰ | è®¾ç½® `need_subtitle=false`ï¼Œè·³è¿‡å­—å¹•ç¿»è¯‘ |

### Step 3: åˆ›å»ºè¾“å‡ºæ–‡ä»¶å¤¹

```powershell
# ä»æ ‡é¢˜æå–å…³é”®è¯ï¼Œåˆ›å»ºæ–‡ä»¶å¤¹
# ç¤ºä¾‹ï¼šMultipleInterests-20260128
$folderName = "<åç§°ç¼©å†™>-$(Get-Date -Format 'yyyyMMdd')"
New-Item -Path "download\$folderName" -ItemType Directory -Force
```

### Step 4: ä¸‹è½½è§†é¢‘

```powershell
# ä¸‹è½½æœ€ä½³ç”»è´¨è§†é¢‘
yt-dlp -f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best" -o "download/<æ–‡ä»¶å¤¹å>/%(title)s.%(ext)s" "<URL>"
```

**å‘½ä»¤é€‰é¡¹å¯¹ç…§**ï¼š

| ç”¨æˆ·éœ€æ±‚ | yt-dlp å‚æ•° |
|---------|-------------|
| æœ€ä½³ç”»è´¨ | `-f "bestvideo[ext=mp4]+bestaudio[ext=m4a]/best[ext=mp4]/best"` |
| 1080p | `-f "bestvideo[height<=1080][ext=mp4]+bestaudio[ext=m4a]/best[height<=1080]"` |
| 720p | `-f "bestvideo[height<=720][ext=mp4]+bestaudio[ext=m4a]/best[height<=720]"` |
| ä»…éŸ³é¢‘ | `-x --audio-format mp3 --audio-quality 0` |

**åå°æ‰§è¡Œ**ï¼š
- è®¾ç½® `WaitMsBeforeAsync=500`ï¼Œå‘½ä»¤åœ¨åå°è¿è¡Œ
- ä½¿ç”¨ `command_status` æ¯ 15-30 ç§’æ£€æŸ¥è¿›åº¦
- ä¸‹è½½å®Œæˆåç»§ç»­ä¸‹ä¸€æ­¥

### Step 5: ç›‘æ§ä¸‹è½½è¿›åº¦

```powershell
# æ£€æŸ¥å‘½ä»¤çŠ¶æ€
command_status -CommandId <ID> -WaitDurationSeconds 15
```

ç­‰å¾… Exit code: 0 è¡¨ç¤ºä¸‹è½½å®Œæˆã€‚

### Step 6: æ·»åŠ ä¸­æ–‡å­—å¹•ï¼ˆå¦‚éœ€è¦ï¼‰

**ä»…å½“ `need_subtitle=true` æ—¶æ‰§è¡Œæ­¤æ­¥éª¤**

ä½¿ç”¨ pyVideoTrans è¿›è¡Œè¯­éŸ³è¯†åˆ«å’Œç¿»è¯‘ï¼š

```powershell
# è‹±è¯‘ä¸­ï¼Œç¡¬å­—å¹•ï¼ˆæ¨èï¼‰
D:\pyVideoTrans\.venv\Scripts\python.exe D:\pyVideoTrans\cli.py --task vtv --name "<è§†é¢‘å®Œæ•´è·¯å¾„>" --source_language_code en --target_language_code zh-cn --subtitle_type 1
```

**å‚æ•°è¯´æ˜**ï¼š

| å‚æ•° | è¯´æ˜ |
|------|------|
| `--task vtv` | è§†é¢‘ç¿»è¯‘ä»»åŠ¡ï¼ˆè¯†åˆ«â†’ç¿»è¯‘â†’åˆæˆï¼‰ |
| `--source_language_code` | æºè¯­è¨€ä»£ç ï¼ˆen/ja/ko ç­‰ï¼‰ |
| `--target_language_code` | ç›®æ ‡è¯­è¨€ï¼š`zh-cn`(ç®€ä½“ä¸­æ–‡) |
| `--subtitle_type` | 1=ç¡¬å­—å¹•(çƒ§å½•), 3=ç¡¬åŒè¯­å­—å¹• |

**ç›‘æ§ç¿»è¯‘è¿›åº¦**ï¼š
- ä½¿ç”¨ `command_status` æ¯ 60 ç§’æ£€æŸ¥ä¸€æ¬¡
- ç¿»è¯‘è¿‡ç¨‹å¯èƒ½éœ€è¦ 10-30 åˆ†é’Ÿï¼ˆè§†é¢‘é•¿åº¦ç›¸å…³ï¼‰
- ç­‰å¾… Exit code: 0 è¡¨ç¤ºå®Œæˆ

### Step 7: å¤åˆ¶è¾“å‡ºæ–‡ä»¶

ç¿»è¯‘å®Œæˆåï¼Œå°†æ–‡ä»¶å¤åˆ¶åˆ°ä¸‹è½½ç›®å½•ï¼š

```powershell
# pyVideoTrans è¾“å‡ºç›®å½•
$outputDir = "D:\pyVideoTrans\output\<è§†é¢‘åç§°-è½¬ä¹‰>\"

# å¤åˆ¶å¸¦å­—å¹•è§†é¢‘
Copy-Item -Path "$outputDir\*.mp4" -Destination "download\<æ–‡ä»¶å¤¹å>\è§†é¢‘ [ä¸­æ–‡å­—å¹•].mp4"

# å¤åˆ¶å­—å¹•æ–‡ä»¶
Copy-Item -Path "$outputDir\zh-cn.srt" -Destination "download\<æ–‡ä»¶å¤¹å>\"
Copy-Item -Path "$outputDir\en.srt" -Destination "download\<æ–‡ä»¶å¤¹å>\"
```

### Step 8: è¿”å›ç»“æœ

å‘ç”¨æˆ·æŠ¥å‘Šå®Œæˆæƒ…å†µï¼š

```
âœ… è§†é¢‘ä¸‹è½½å¹¶æ·»åŠ ä¸­æ–‡å­—å¹•å®Œæˆ

ğŸ“Š ä»»åŠ¡è¯¦æƒ…
| é¡¹ç›® | å†…å®¹ |
|------|------|
| è§†é¢‘æ ‡é¢˜ | <æ ‡é¢˜> |
| æºè¯­è¨€ | è‹±è¯­ (en) |
| ç›®æ ‡è¯­è¨€ | ç®€ä½“ä¸­æ–‡ (zh-cn) |

ğŸ“ è¾“å‡ºæ–‡ä»¶
download/<æ–‡ä»¶å¤¹å>/
â”œâ”€â”€ <è§†é¢‘å>.mp4 (åŸå§‹è§†é¢‘)
â”œâ”€â”€ <è§†é¢‘å> [ä¸­æ–‡å­—å¹•].mp4 (å¸¦å­—å¹•)
â”œâ”€â”€ zh-cn.srt
â””â”€â”€ en.srt
```

---

## é”™è¯¯å¤„ç†

| é”™è¯¯ç±»å‹ | å¤„ç†æ–¹å¼ |
|---------|---------|
| URL æ— æ•ˆ | æç¤ºç”¨æˆ·æ£€æŸ¥é“¾æ¥æ ¼å¼ |
| è§†é¢‘ä¸å¯ç”¨ | æç¤ºè§†é¢‘å¯èƒ½å·²è¢«åˆ é™¤æˆ–åœ°åŒºé™åˆ¶ |
| ç½‘ç»œè¶…æ—¶ | å»ºè®®ç”¨æˆ·ç¨åé‡è¯• |
| éœ€è¦ç™»å½• | æç¤ºè¯¥è§†é¢‘éœ€è¦è´¦å·ç™»å½• |
| pyVideoTrans å¤±è´¥ | æ£€æŸ¥è·¯å¾„å’Œ API é…ç½®ï¼Œæä¾›æ‰‹åŠ¨çƒ§å½•å¤‡é€‰æ–¹æ¡ˆ |

## å¤‡é€‰æ–¹æ¡ˆï¼šFFmpeg ç›´æ¥çƒ§å½•å­—å¹•

å¦‚æœ pyVideoTrans ä¸å¯ç”¨æˆ–å·²æœ‰ `.srt` æ–‡ä»¶ï¼š

```powershell
# çƒ§å½•ä¸­æ–‡å­—å¹•åˆ°è§†é¢‘
ffmpeg -i "<è§†é¢‘.mp4>" -vf "subtitles='<å­—å¹•è·¯å¾„.srt>':force_style='FontSize=24,PrimaryColour=&H00FFFFFF,OutlineColour=&H00000000,Outline=2'" -c:a copy "<è¾“å‡º.mp4>"
```

> **æ³¨æ„**ï¼šè·¯å¾„ä¸­çš„ `\` éœ€æ”¹ä¸º `/`

---

## å¸¸ç”¨å‘½ä»¤å‚è€ƒ

```powershell
# æŸ¥çœ‹å¯ç”¨æ ¼å¼
yt-dlp -F "<URL>"

# ä¸‹è½½æŒ‡å®šæ ¼å¼
yt-dlp -f <format_id> "<URL>"

# ä¸‹è½½æ’­æ”¾åˆ—è¡¨
yt-dlp --yes-playlist "<PLAYLIST_URL>"

# é™é€Ÿä¸‹è½½
yt-dlp --limit-rate 5M "<URL>"

# ä½¿ç”¨ä»£ç†
yt-dlp --proxy "http://127.0.0.1:7890" "<URL>"
```

## æ”¯æŒçš„å¹³å°

yt-dlp æ”¯æŒ 1000+ ç½‘ç«™ï¼Œå¸¸ç”¨çš„åŒ…æ‹¬ï¼š
- YouTubeã€Bilibiliã€Twitter/Xã€TikTokã€Vimeoã€æŠ–éŸ³ã€è¥¿ç“œè§†é¢‘ç­‰

å®Œæ•´åˆ—è¡¨ï¼šhttps://github.com/yt-dlp/yt-dlp/blob/master/supportedsites.md

---

## pyVideoTrans ç¯å¢ƒé…ç½®

### å‰ç½®æ¡ä»¶
- Python 3.10 - 3.12
- FFmpegï¼ˆå·²é…ç½®åˆ° PATHï¼‰

### å®‰è£…è·¯å¾„
- å®‰è£…ä½ç½®ï¼š`D:\pyVideoTrans`
- Python ç¯å¢ƒï¼š`D:\pyVideoTrans\.venv\Scripts\python.exe`
- CLI å…¥å£ï¼š`D:\pyVideoTrans\cli.py`

### ç¿»è¯‘æœåŠ¡é…ç½®
- **ç¿»è¯‘æ¸ é“**ï¼šDeepSeek
- **API URL**ï¼š`https://api.deepseek.com`
- **é…ç½®æ–¹å¼**ï¼šé¦–æ¬¡è¿è¡Œ GUI (`uv run sp.py`) è¿›è¡Œé…ç½®

### éªŒè¯å®‰è£…

```powershell
D:\pyVideoTrans\.venv\Scripts\python.exe D:\pyVideoTrans\cli.py --help
```

---

## è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶

### åŠŸèƒ½è¯´æ˜

é¡¹ç›®é…ç½®äº†è‡ªåŠ¨æ¸…ç†æœºåˆ¶ï¼Œå½“ `tmpclaude-*` ä¸´æ—¶æ–‡ä»¶è¶…è¿‡ 3 ä¸ªæ—¶è‡ªåŠ¨æ¸…ç†ï¼Œä¿æŒå·¥ä½œç›®å½•æ•´æ´ã€‚

### å®ç°æ–¹å¼

**1. æ¸…ç†è„šæœ¬**ï¼š`.claude/hooks/cleanup-temp-files.sh`

```bash
#!/bin/bash
# è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶çš„è„šæœ¬
# å½“ tmpclaude-* æ–‡ä»¶è¶…è¿‡ 3 ä¸ªæ—¶è‡ªåŠ¨æ¸…ç†

WORK_DIR="$(pwd)"
TEMP_FILE_COUNT=$(find "$WORK_DIR" -maxdepth 1 -name "tmpclaude-*" -type f 2>/dev/null | wc -l)

echo "æ£€æµ‹åˆ° $TEMP_FILE_COUNT ä¸ªä¸´æ—¶æ–‡ä»¶"

if [ "$TEMP_FILE_COUNT" -gt 3 ]; then
    echo "ä¸´æ—¶æ–‡ä»¶æ•°é‡è¶…è¿‡ 3 ä¸ªï¼Œå¼€å§‹æ¸…ç†..."
    find "$WORK_DIR" -maxdepth 1 -name "tmpclaude-*" -type f -delete
    REMAINING_COUNT=$(find "$WORK_DIR" -maxdepth 1 -name "tmpclaude-*" -type f 2>/dev/null | wc -l)
    echo "âœ… æ¸…ç†å®Œæˆï¼åˆ é™¤äº† $((TEMP_FILE_COUNT - REMAINING_COUNT)) ä¸ªä¸´æ—¶æ–‡ä»¶"
else
    echo "ä¸´æ—¶æ–‡ä»¶æ•°é‡æœªè¶…è¿‡é˜ˆå€¼ï¼Œæ— éœ€æ¸…ç†"
fi
```

**2. Hook é…ç½®**ï¼š`.claude/config.json`

```json
{
  "hooks": {
    "postToolUse": {
      "enabled": true,
      "command": "bash .claude/hooks/cleanup-temp-files.sh"
    }
  }
}
```

### å·¥ä½œæµç¨‹

1. æ¯æ¬¡ Claude Code æ‰§è¡Œå®Œå·¥å…·æ“ä½œåï¼Œè‡ªåŠ¨è§¦å‘ `postToolUse` hook
2. è¿è¡Œæ¸…ç†è„šæœ¬ï¼Œæ£€æµ‹ä¸´æ—¶æ–‡ä»¶æ•°é‡
3. å¦‚æœè¶…è¿‡ 3 ä¸ªï¼Œè‡ªåŠ¨åˆ é™¤æ‰€æœ‰ `tmpclaude-*` æ–‡ä»¶
4. æ˜¾ç¤ºæ¸…ç†ç»“æœ

### æ‰‹åŠ¨æ¸…ç†

å¦‚éœ€æ‰‹åŠ¨æ¸…ç†ï¼Œå¯ä»¥è¿è¡Œï¼š

```bash
bash .claude/hooks/cleanup-temp-files.sh
```

---

**å‚è€ƒé“¾æ¥**ï¼š
- pyVideoTrans å®˜ç½‘ï¼šhttps://pyvideotrans.com
- GitHub ä»“åº“ï¼šhttps://github.com/jianchang512/pyvideotrans
- yt-dlp æ–‡æ¡£ï¼šhttps://github.com/yt-dlp/yt-dlp
